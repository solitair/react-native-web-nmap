Object.defineProperty(exports,"__esModule",{value:true});var _jsxFileName='src/index.js';var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[typeof Symbol==='function'?Symbol.iterator:'@@iterator'](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if((typeof Symbol==='function'?Symbol.iterator:'@@iterator')in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();exports.Marker=Marker;var _react=require('react');var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}var MapContext=(0,_react.createContext)();var ncpClientId='lh33q9226g';function NaverMapView(props){var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),naverMap=_useState2[0],setNaverMap=_useState2[1];var _useState3=(0,_react.useState)({}),_useState4=_slicedToArray(_useState3,2),centerOfMap=_useState4[0],setCenterOfMap=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=_slicedToArray(_useState5,2),scriptLoaded=_useState6[0],setScriptLoaded=_useState6[1];var mapRef=(0,_react.useRef)(null);var center=props.center,style=props.style,onCameraChange=props.onCameraChange;var myStyle=style?style:{width:'100%',height:'100%'};var dragendEventListener=null;var zoomEventListener=null;(0,_react.useEffect)(function(){if(scriptLoaded===false){var script=document.createElement('script');script.src='https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId='+ncpClientId;script.async=true;document.body.appendChild(script);script.onload=function(){setScriptLoaded(true);};}else{var _window=window,naver=_window.naver;if(!mapRef.current||!naver){console.log('Warning: div element for map or naver object is not valid.');return;}var location=new naver.maps.LatLng(centerOfMap.latitude,centerOfMap.longitude);var mapOptions={center:location,zoom:centerOfMap.zoom,zoomControl:true,zoomControlOptions:{position:naver.maps.Position.TOP_RIGHT}};var map=new naver.maps.Map(mapRef.current,mapOptions);setNaverMap(map);dragendEventListener=naver.maps.Event.addListener(map,'dragend',function(){var mapCenter=map.getCenter();onCameraChange({latitude:mapCenter._lat,longitude:mapCenter._lng,zoom:center.zoom});});zoomEventListener=naver.maps.Event.addListener(map,'zoom_changed',function(zoom){var mapCenter=map.getCenter();onCameraChange({latitude:mapCenter._lat,longitude:mapCenter._lng,zoom:zoom});});}return function(){if(dragendEventListener)window.naver.maps.Event.removeListener(dragendEventListener);if(zoomEventListener)window.naver.maps.Event.removeListener(zoomEventListener);};},[scriptLoaded]);(0,_react.useEffect)(function(){setCenterOfMap(center);if(naverMap){var location=new window.naver.maps.LatLng(center.latitude,center.longitude);naverMap.setCenter(location);naverMap.setZoom(center.zoom);}},[center]);return _react2.default.createElement(MapContext.Provider,{value:naverMap,__source:{fileName:_jsxFileName,lineNumber:88}},_react2.default.createElement('div',{ref:mapRef,style:myStyle,__source:{fileName:_jsxFileName,lineNumber:89}},'Map area'),props.children);}function Marker(props){var naverMap=(0,_react.useContext)(MapContext);var coordinate=props.coordinate,onClick=props.onClick,image=props.image,width=props.width,height=props.height,rest=_objectWithoutProperties(props,['coordinate','onClick','image','width','height']);(0,_react.useEffect)(function(){var _window2=window,naver=_window2.naver;if(!naverMap||!naver){console.log('Warning: map object or naver object is no valid.');return;}var markerOptions={position:new naver.maps.LatLng(coordinate.latitude,coordinate.longitude),map:naverMap};if(image){markerOptions['icon']={url:image.uri};}var currentMarker=new naver.maps.Marker(markerOptions);var clickEventListener=naver.maps.Event.addListener(currentMarker,'click',function(){onClick();});return function(){naver.maps.Event.removeListener(clickEventListener);};},[naverMap]);return _react2.default.createElement('div',{__source:{fileName:_jsxFileName,lineNumber:129}});}exports.default=NaverMapView;